metadata:
  name: ss
  version: 0.0.1
  description: devlopment environment with 1 command

include:
  templates: path:///Users/ianluo/Documents/apps/templates
  # python_units: https://github.com/IanLuo/python_units
  python_units: path:///Users/ianluo/Documents/apps/python_units
  nixpkgs:
    url: https://github.com/NixOS/nixpkgs
    ref: nixpkgs-unstable

units:
  python:
    source: python_units.python
    version: "3.12.0"

  gnumake: nixpkgs.gnumake

  poetry: python_units.poetry

  pyright: python_units.pyright

  nixfmt: nixpkgs.nixfmt-classic

  jsonfmt: nixpkgs.jsonfmt

  prefetch-git: nixpkgs.nix-prefetch-git

  git-helper:
    source: templates.git-helper
    ignores: ["result", ".direnv", ".ss", ".venv*", ".pytest_cache", ".mypy_cache", "dist", "build", "*.egg-info", ".tox", ".nox", ".coverage", ".eggs", "__pycache__", ".pytest"]


actions:
  test:
    action>: python_units.actions.test

  build:
    action>: python_units.actions.build

onstart:
  - sh>:
      welcome: echo "welcome to ss, a development environment with 1 command"
  - sh>:
      help: echo "type 'ss actions' to see available commands"

action-flows:
  test-flow:
    - sh>:
        step1: echo $1
    - sh>:
        step2: |
          echo "result form step1: $step1"
    - sh>:
        step3: |
          echo "result form step2: $step2"
    - sh>:
        step4: |
          echo "result form step3: $step3"

subscriptions:
