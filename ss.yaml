metadata:
  name: ss
  version: 0.0.1
  description: devlopment environment with 1 command

include:
  ss: https://github.com/IanLuo/ss-templates
  nixpkgs: https://github.com/NixOS/nixpkgs/nixpkgs-unstable

units:
  python:
    source: $nixpkgs.python310
    initialize:
      python -m venv .venv
      source .venv/bin/activate

  poetry:
    name: $metadata.name
    version: $metadata.version
    source: $nixpkgs.poetry

  pyright:
    source: $nixpkgs.nodePackages.pyright

  nixpkgs-fmg:
    source: $nixpkgs.nixpkgs-fmt

  database:
    source: $nixpkgs.postgres
    actions:

  cache:
    source: $nixpkgs.redis

actions:
  test: "pytest"
  build: "poetry build"
  install: "poetry install"
  add: "poetry add"
  list: "poetry list"

action-flow:
  log-commit:
    - commit
    - error: "$param.length == 0"
    - push
