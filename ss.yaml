# there are three source of 'units'
# 1. defiend in templates
# 2. refed from nixpkgs, and wrapped by template function: with same interface with other 'units'
# 3. customized by user, provide a git repo with a default.nix or flake.nix in it, or point to a .nix file

source:
  units: latest
  pkgs: f895a4ef0f01f9d2af2370533829c4f03ec408f4
  other: "github://"

metadata:
  name: ss
  version: 0.0.1
  description: devlopment environment with 1 command

units:
  db.postgres:
    username: "ss_db"
    password: "admin"
    database: "password"

  language.python:
    pythonVersion: "python310"
    libs-default:
      - typer
      - pynvim
      - pyyaml
      - rich
      - jsonpath-ng
      - requests
      - black
      - flit:
          ^git:
            url: "https://www.github.com/xxxxx"
            rev: "xxxxx"

  language.pytest:
    python: $units.language.python

  language.pythonRunnablePackage:
    name: $metadata.name
    version: $metadata.version
    src: ../.
    format: pyproject
    python: $units.language.python
    buildInputs: $units.language.python~>libs-default

pkgs:
  nodePackages.pyright: null

other: null
